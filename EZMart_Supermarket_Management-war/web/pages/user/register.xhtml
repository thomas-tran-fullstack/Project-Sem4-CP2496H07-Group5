<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/templates/user/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:h="jakarta.faces.html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="content">
        <div class="flex min-h-screen w-full bg-white dark:bg-background-dark shadow-xl overflow-hidden rounded-none sm:rounded-none">
            <!-- Left Side: Image / Hero -->
            <div class="hidden lg:flex lg:w-1/2 relative bg-gray-100 items-center justify-center overflow-hidden">
                <img alt="Fresh vegetables and fruits market stall with vibrant colors" class="absolute inset-0 h-full w-full object-cover" data-alt="Fresh vegetables and fruits market stall with vibrant colors" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAXtrHmUxXHMGi_H6do2cpMyMJYGjGzIEIwwAeEWQNbAid-ZamI6BVD-iQqOwaPfJtMwGA-A0udOGByYX4ObdYXgx2vGBIZwnyX9Bkgf4unAsFZAbQpLagexqeddQQOLczHM_-FLbpTJt7-OUBml06esX1lyQZTjrRlqwLHR0uMwYdJ17zxNewvq_2AiUyd2FAmBCaQrv3PlyFa_ihZVuiUW82g6D-C5GsJDfMyIqx7LKkSlPvDW5LFbMVbYxgYq3GZTwPZa2Fi7v4"/>
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>
                <div class="relative z-10 p-12 text-white max-w-xl">
                    <div class="mb-6 flex items-center gap-3">
                        <div class="size-10 bg-primary rounded-lg flex items-center justify-center text-white">
                            <span class="material-symbols-outlined text-2xl">local_mall</span>
                        </div>
                        <h1 class="text-3xl font-bold tracking-tight">EZMart</h1>
                    </div>
                    <h2 class="text-4xl font-bold leading-tight mb-4">Freshness delivered to your doorstep.</h2>
                    <p class="text-lg text-gray-200">Join thousands of happy customers who get their daily essentials delivered fresh and fast.</p>
                    <div class="mt-8 flex gap-4">
                        <div class="flex items-center gap-2 bg-white/10 backdrop-blur-md px-4 py-2 rounded-lg border border-white/20">
                            <span class="material-symbols-outlined text-primary">verified</span>
                            <span class="font-medium">Quality Guarantee</span>
                        </div>
                        <div class="flex items-center gap-2 bg-white/10 backdrop-blur-md px-4 py-2 rounded-lg border border-white/20">
                            <span class="material-symbols-outlined text-primary">local_shipping</span>
                            <span class="font-medium">Free Shipping</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Right Side: Registration Form -->
            <div class="w-full lg:w-1/2 flex flex-col h-screen overflow-y-auto">
                <!-- Mobile Header -->
                <div class="lg:hidden flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-800">
                    <div class="flex items-center gap-2 text-[#111813] dark:text-white">
                        <div class="size-8 bg-primary/10 rounded-lg flex items-center justify-center text-primary">
                            <span class="material-symbols-outlined text-xl">local_mall</span>
                        </div>
                        <span class="text-lg font-bold">EZMart</span>
                    </div>
                </div>
                <div class="flex-1 flex flex-col justify-center px-6 py-8 sm:px-12 lg:px-20 xl:px-24">
                    <div class="max-w-md w-full mx-auto space-y-8">
                        <!-- Error/Success Messages -->
                        <h:panelGroup layout="block" styleClass="space-y-2">
                            <ui:repeat value="#{facesContext.messageList}" var="msg">
                                <div class="#{msg.severity.ordinal == 2 ? 'bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 text-red-800 dark:text-red-200' : 'bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 text-green-800 dark:text-green-200'} rounded-lg p-3 flex items-start gap-3">
                                    <span class="material-symbols-outlined flex-shrink-0 text-sm">#{msg.severity.ordinal == 2 ? 'error' : 'check_circle'}</span>
                                    <span class="text-sm">#{msg.summary}</span>
                                </div>
                            </ui:repeat>
                        </h:panelGroup>

                        <!-- Heading Section -->
                        <div class="text-center sm:text-left">
                            <h2 class="text-3xl font-bold tracking-tight text-[#111813] dark:text-white sm:text-4xl">
                                #{locale.getMessage('register.createAccount')}
                            </h2>
                            <p class="mt-2 text-base text-[#4b5563] dark:text-[#d1d5db]">
                                #{locale.getMessage('register.haveAccount')} 
                                <h:link class="font-semibold text-primary hover:text-primary-dark transition-colors" value="#{locale.getMessage('register.logIn')}" outcome="login"/>
                            </p>
                        </div>
                        <!-- Social Login -->
                        <div class="grid grid-cols-1 gap-3">
                            <h:form styleClass="contents">
                                <h:commandButton id="google-reg-btn"
                                               action="#{auth.redirectToGoogleOAuth()}"
                                               styleClass="flex items-center justify-center gap-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-200 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
                                               value="Google" />
                            </h:form>
                        </div>
                        <!-- Form -->
                        <h:form class="space-y-5">
                            <div class="relative">
                                <div aria-hidden="true" class="absolute inset-0 flex items-center">
                                    <div class="w-full border-t border-gray-200 dark:border-gray-700"></div>
                                </div>
                                <!-- Username -->
                                <div>
                                    <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="username">#{locale.getMessage('register.username')}</label>
                                    <div class="relative">
                                        <h:inputText id="username" value="#{auth.regUsername}" styleClass="form-input block w-full rounded-lg border-0 py-3.5 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                    </div>
                                </div>
                                <div class="relative flex justify-center">
                                    <span class="bg-white dark:bg-background-dark px-2 text-sm text-[#4b5563] dark:text-[#d1d5db]">#{locale.getMessage('register.orContinueWith')}</span>
                                </div>
                            </div>
                            <!-- First Name -->
                            <div>
                                <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="first-name">#{locale.getMessage('register.firstName')}</label>
                                <div class="relative">
                                    <h:inputText id="first-name" value="#{auth.firstName}" styleClass="form-input block w-full rounded-lg border-0 py-3.5 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                        <span class="material-symbols-outlined text-[20px]">person</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Middle Name -->
                            <div>
                                <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="middle-name">#{locale.getMessage('register.middleName')}</label>
                                <div class="relative">
                                    <h:inputText id="middle-name" value="#{auth.middleName}" styleClass="form-input block w-full rounded-lg border-0 py-3.5 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                </div>
                            </div>
                            <!-- Last Name -->
                            <div>
                                <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="last-name">#{locale.getMessage('register.lastName')}</label>
                                <div class="relative">
                                    <h:inputText id="last-name" value="#{auth.lastName}" styleClass="form-input block w-full rounded-lg border-0 py-3.5 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                </div>
                            </div>
                            <!-- Email -->
                            <div>
                                <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="email">#{locale.getMessage('register.email')}</label>
                                <div class="relative">
                                    <h:inputText id="email" value="#{auth.regEmail}" styleClass="form-input block w-full rounded-lg border-0 py-3.5 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                        <span class="material-symbols-outlined text-[20px]">mail</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Mobile Phone -->
                            <div>
                                <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="mobile-phone">#{locale.getMessage('register.mobilePhone')}</label>
                                <div class="relative">
                                    <h:inputText id="mobile-phone" value="#{auth.mobilePhone}" styleClass="form-input block w-full rounded-lg border-0 py-3.5 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" placeholder="10-11 digits" />
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                        <span class="material-symbols-outlined text-[20px]">phone</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Address -->
                            <div>
                                <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5">Address (Optional)</label>
                                <button type="button" id="select-map-btn" onclick="openRegisterAddressModal()" class="w-full flex items-center justify-center gap-2 rounded-lg bg-green-600 px-3 py-3.5 text-sm font-bold leading-6 text-white shadow-sm hover:bg-green-700 transition-all active:scale-[0.98]">
                                    <span class="material-symbols-outlined">add</span>
                                    <span>Add New Address</span>
                                </button>
                                <!-- Hidden fields to store selected address -->
                                <div id="reg-address-display" class="mt-2 text-sm text-gray-600 dark:text-gray-400"></div>
                            </div>
                            <!-- Password Row -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                                <div>
                                    <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="pwd-field">#{locale.getMessage('register.password')}</label>
                                    <div class="relative">
                                        <h:inputText id="pwd-field" value="#{auth.regPassword}" type="password" styleClass="form-input block w-full rounded-lg border-0 py-3.5 pr-12 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                        <button id="pwd-toggle-1" class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-auto text-gray-400 hover:text-primary transition-colors" type="button">
                                            <span class="material-symbols-outlined pwd-icon">visibility_off</span>
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium leading-6 text-[#111813] dark:text-gray-200 mb-1.5" for="confirm-password">#{locale.getMessage('register.confirmPassword')}</label>
                                    <div class="relative">
                                        <h:inputText id="confirm-password" value="#{auth.regConfirmPassword}" type="password" styleClass="form-input block w-full rounded-lg border-0 py-3.5 pr-12 text-gray-900 shadow-sm ring-1 ring-inset ring-[#dce5df] placeholder:text-[#4b5563]/70 dark:placeholder:text-[#d1d5db]/70 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 dark:bg-gray-800 dark:ring-gray-700 dark:text-white transition-shadow" />
                                        <button id="pwd-toggle-2" class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-auto text-gray-400 hover:text-primary transition-colors" type="button">
                                            <span class="material-symbols-outlined pwd-icon">visibility_off</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                                <!-- Password Strength Indicator -->
                                <div id="pwd-strength" class="flex items-center gap-1.5 mt-1">
                                    <div id="bar1" class="h-1 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full"></div>
                                    <div id="bar2" class="h-1 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full"></div>
                                    <div id="bar3" class="h-1 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full"></div>
                                    <div id="bar4" class="h-1 flex-1 bg-gray-200 dark:bg-gray-700 rounded-full"></div>
                                    <span id="pwd-strength-label" class="text-xs text-[#4b5563] dark:text-[#d1d5db] ml-2">&#160;</span>
                                </div>
                            <!-- Checkboxes -->
                            <div class="space-y-4 pt-2">
<!--                                <div class="relative flex items-start">
                                    <div class="flex h-6 items-center">
                                        <input aria-describedby="marketing-description" class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary dark:border-gray-600 dark:bg-gray-700" id="marketing" name="marketing" type="checkbox"/>
                                    </div>
                                    <div class="ml-3 text-sm leading-6">
                                        <label class="font-medium text-[#111813] dark:text-gray-200" for="marketing">#{locale.getMessage('register.keepUpdated')}</label>
                                        <p class="text-[#4b5563] dark:text-[#d1d5db]" id="marketing-description">#{locale.getMessage('register.emailAbout')}</p>
                                    </div>
                                </div>-->
                                <div class="relative flex items-start">
                                    <div class="flex h-6 items-center">
                                        <input checked="" class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary dark:border-gray-600 dark:bg-gray-700" id="terms" name="terms" type="checkbox"/>
                                    </div>
                                    <div class="ml-3 text-sm leading-6">
                                        <label class="font-medium text-[#111813] dark:text-gray-200" for="terms">#{locale.getMessage('register.agreeToTerms')} <a class="text-primary hover:underline" href="#">#{locale.getMessage('register.termsOfService')}</a> #{locale.getMessage('register.and')} <a class="text-primary hover:underline" href="#">#{locale.getMessage('register.privacyPolicy')}</a>.</label>
                                    </div>
                                </div>
                            </div>
                            <!-- Submit Button -->
                            <div class="pt-4">
                                <h:commandButton action="#{auth.register}" value="#{locale.getMessage('register.signUp')}" styleClass="flex w-full justify-center rounded-lg bg-primary px-3 py-3.5 text-sm font-bold leading-6 text-white shadow-sm hover:bg-primary-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary transition-all active:scale-[0.98]" />
                            </div>
                            
                            <!-- Context path storage (extracted from URL via JavaScript) -->
                            <div id="contextPath" style="display:none;"></div>
                            
                            <!-- Hidden fields for address data (from modal) -->
                            <h:inputHidden id="regaddr_type" value="#{auth.addressType}" />
                            <h:inputHidden id="regaddr_country" value="#{auth.country}" />
                            <h:inputHidden id="regaddr_region" value="#{auth.state}" />
                            <h:inputHidden id="regaddr_city" value="#{auth.city}" />
                            <h:inputHidden id="regaddr_street" value="#{auth.street}" />
                            <h:inputHidden id="regaddr_label" value="#{auth.addressLabel}" />
                            <h:inputHidden id="regaddr_lat" value="#{auth.latitude}" />
                            <h:inputHidden id="regaddr_lng" value="#{auth.longitude}" />
                        </h:form>
                        
                        <!-- Address Modal for Register -->
                        <div id="registerAddressModal" class="hidden fixed inset-0 flex items-center justify-center bg-black/60 p-4" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:100200;">
                            <div class="bg-white dark:bg-surface-dark rounded-xl shadow-lg w-full max-w-2xl max-h-[85vh] overflow-y-auto flex flex-col" style="position:relative;z-index:100300;">
                                <!-- Modal Header -->
                                <div class="sticky top-0 flex items-center justify-between p-5 bg-gradient-to-r from-primary/10 to-green-50 border-b">
                                    <div>
                                        <h3 class="text-lg font-bold text-[#111813]">Add Address</h3>
                                        <p class="text-xs text-[#4b5563]">Select location details</p>
                                    </div>
                                    <button type="button" onclick="closeRegisterAddressModal();" class="text-xl px-3 py-1 hover:bg-gray-200 rounded-md">âœ•</button>
                                </div>
                                <!-- Modal Body -->
                                <div class="p-6 space-y-4 flex-1 overflow-y-auto">
                                    <!-- Address Type -->
                                    <div>
                                        <label class="text-sm font-medium block mb-2">Address Type</label>
                                        <select id="regaddr_type_ui" class="w-full p-2 border rounded-md">
                                            <option value="">-- Select Type --</option>
                                            <option value="Home">Home</option>
                                            <option value="Work">Work</option>
                                        </select>
                                    </div>

                                    <!-- Country -->
                                    <div>
                                        <label class="text-sm font-medium block mb-2">Country</label>
                                        <select id="regaddr_country_ui" class="w-full p-2 border rounded-md" onchange="onRegCountryChange()">
                                            <option value="">-- Select Country --</option>
                                            <option value="United States">United States</option>
                                            <option value="Vietnam">Vietnam</option>
                                        </select>
                                    </div>

                                    <!-- Region / Province / State -->
                                    <div id="regreg_region" class="hidden">
                                        <label id="reregion_label" class="text-sm font-medium block mb-2">State / Province</label>
                                        <select id="regaddr_region_input" class="w-full p-2 border rounded-md">
                                            <option value="">-- Select --</option>
                                        </select>
                                    </div>

                                    <!-- City / District -->
                                    <div id="regstep_city" class="hidden">
                                        <label id="regcity_label" class="text-sm font-medium block mb-2">City / District</label>
                                        <select id="regaddr_city_input" class="w-full p-2 border rounded-md">
                                            <option value="">-- Select --</option>
                                        </select>
                                    </div>

                                    <!-- Street Address -->
                                    <div id="regstep_street" class="hidden">
                                        <label class="text-sm font-medium block mb-2">Street Address</label>
                                        <input id="regaddr_street_ui" type="text" placeholder="Enter street name..." class="w-full p-2 border rounded-md" />
                                    </div>

                                    <!-- Label / House Number -->
                                    <div id="regstep_label" class="hidden">
                                        <label class="text-sm font-medium block mb-2">Label (Optional)</label>
                                        <input id="regaddr_label_ui" type="text" placeholder="House number / Building..." class="w-full p-2 border rounded-md" />
                                    </div>

                                    <!-- Map Section -->
                                    <div id="regstep_map_wrapper" class="hidden">
                                        <label class="text-sm font-medium block mb-2">Confirm Location on Map</label>
                                        <p class="text-xs text-gray-600 mb-2">Drag the marker to adjust the exact location</p>
                                        <div id="regaddr_map" class="w-full h-72 rounded-md border bg-gray-100"></div>
                                    </div>

                                    <!-- Select on Map Button -->
                                    <div id="regmap_button_row" class="hidden mt-6 pt-6 border-t">
                                        <button type="button" id="regselect_map_btn" onclick="openRegMapPicker()" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90">Select your place on map</button>
                                    </div>

                                    <!-- Action Buttons -->
                                    <div class="flex justify-end gap-3 mt-6 pt-4 border-t">
                                        <button type="button" onclick="closeRegisterAddressModal()" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100">Cancel</button>
                                        <button type="button" onclick="saveRegisterAddress()" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90">Save Address</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <style>
                            /* Tom-Select styling for register address modal */
                            #registerAddressModal .ts-wrapper {
                                width: 100% !important;
                            }
                            
                            #registerAddressModal .ts-control {
                                width: 100% !important;
                                padding: 0.5rem !important;
                                border: 1px solid #e5e7eb !important;
                                border-radius: 0.375rem !important;
                                background-color: white !important;
                                box-shadow: none !important;
                            }
                            
                            #registerAddressModal .dark .ts-control {
                                background-color: #1f2937 !important;
                                border-color: #374151 !important;
                            }
                            
                            #registerAddressModal .ts-control.focus,
                            #registerAddressModal .ts-control.active {
                                border-color: #16a34a !important;
                                box-shadow: 0 0 0 1px #16a34a !important;
                            }
                            
                            #registerAddressModal .ts-dropdown {
                                width: 100% !important;
                                top: 100% !important;
                                border: 1px solid #e5e7eb !important;
                                border-radius: 0.375rem !important;
                                background-color: white !important;
                                margin-top: 0.25rem !important;
                            }
                            
                            #registerAddressModal .dark .ts-dropdown {
                                background-color: #1f2937 !important;
                                border-color: #374151 !important;
                            }
                        </style>
                        <!-- Tom-Select CSS and JS -->
                        <link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.css" rel="stylesheet" />
                        <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
                        <!-- Leaflet CSS and JS for Map -->
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet/dist/leaflet.css" />
                        <script src="https://cdn.jsdelivr.net/npm/leaflet/dist/leaflet.js"></script>
                        
                        <script>//<![CDATA[
                            function initPasswordFunctions() {
                                console.log('Initializing password functions...');
                                
                                // Find password field using attribute selector (JSF may add namespace prefix)
                                var pwd1 = document.querySelector('input[id$="pwd-field"]') || document.getElementById('pwd-field');
                                var pwd2 = document.querySelector('input[id$="confirm-password"]') || document.getElementById('confirm-password');
                                var toggle1 = document.querySelector('button[id$="pwd-toggle-1"]') || document.getElementById('pwd-toggle-1');
                                var toggle2 = document.querySelector('button[id$="pwd-toggle-2"]') || document.getElementById('pwd-toggle-2');
                                
                                console.log('pwd1:', pwd1);
                                console.log('pwd2:', pwd2);
                                console.log('toggle1:', toggle1);
                                console.log('toggle2:', toggle2);
                                
                                // Toggle password visibility for password field
                                if(toggle1 && pwd1) {
                                    toggle1.addEventListener('click', function(e) {
                                        e.preventDefault();
                                        var icon1 = toggle1.querySelector('.pwd-icon');
                                        if(pwd1.type === 'password') {
                                            pwd1.type = 'text';
                                            icon1.textContent = 'visibility';
                                        } else {
                                            pwd1.type = 'password';
                                            icon1.textContent = 'visibility_off';
                                        }
                                    });
                                    console.log('Toggle1 listener added');
                                }
                                
                                // Toggle password visibility for confirm password field
                                if(toggle2 && pwd2) {
                                    toggle2.addEventListener('click', function(e) {
                                        e.preventDefault();
                                        var icon2 = toggle2.querySelector('.pwd-icon');
                                        if(pwd2.type === 'password') {
                                            pwd2.type = 'text';
                                            icon2.textContent = 'visibility';
                                        } else {
                                            pwd2.type = 'password';
                                            icon2.textContent = 'visibility_off';
                                        }
                                    });
                                    console.log('Toggle2 listener added');
                                }
                                
                                // Password strength indicator
                                function scorePassword(p){
                                    if(!p) return 0;
                                    var score = 0;
                                    if(p.length >= 8) score++;
                                    if(/[0-9]/.test(p)) score++;
                                    if(/[a-z]/.test(p) && /[A-Z]/.test(p)) score++;
                                    if(/[^A-Za-z0-9]/.test(p)) score++;
                                    return score;
                                }
                                
                                function updateUI(score){
                                    var bars = [
                                        document.querySelector('div[id$="bar1"]') || document.getElementById('bar1'),
                                        document.querySelector('div[id$="bar2"]') || document.getElementById('bar2'),
                                        document.querySelector('div[id$="bar3"]') || document.getElementById('bar3'),
                                        document.querySelector('div[id$="bar4"]') || document.getElementById('bar4')
                                    ];
                                    if(!bars[0]) return;
                                    for(var i=0;i<4;i++){
                                        if(i<score){
                                            bars[i].classList.remove('bg-gray-200');
                                            bars[i].classList.remove('dark:bg-gray-700');
                                            bars[i].classList.add('bg-primary');
                                        } else {
                                            bars[i].classList.remove('bg-primary');
                                            bars[i].classList.add('bg-gray-200');
                                            bars[i].classList.add('dark:bg-gray-700');
                                        }
                                    }
                                    var label = document.querySelector('span[id$="pwd-strength-label"]') || document.getElementById('pwd-strength-label');
                                    if(label){
                                        if(score <= 1) { label.textContent = 'Low'; }
                                        else if(score == 2 || score == 3) { label.textContent = 'Medium'; }
                                        else { label.textContent = 'High'; }
                                    }
                                }
                                
                                // Add input listener for password strength
                                if(pwd1) {
                                    pwd1.addEventListener('input', function(e){
                                        var s = scorePassword(e.target.value);
                                        updateUI(s);
                                    });
                                    console.log('Password strength listener added');
                                }
                            }
                            
                            // Initialize when DOM is ready
                            if(document.readyState === 'loading') {
                                document.addEventListener('DOMContentLoaded', function() {
                                    initPasswordFunctions();
                                    initRegAddressListeners();
                                });
                            } else {
                                initPasswordFunctions();
                                initRegAddressListeners();
                            }
                            
                            function initRegAddressListeners() {
                                var regionInput = document.getElementById('regaddr_region_input');
                                var cityInput = document.getElementById('regaddr_city_input');
                                
                                // Note: Tom-Select onChange is handled in initRegAddressTomSelect
                                // No need to add manual listeners as onChange callback is configured there
                                console.log('Register address listeners initialized');
                            }
                            
                            // Data storage for address modal
                            var regVietnamData = null;
                            var regUSData = null;
                            var regTomSelectRegion = null;
                            var regTomSelectCity = null;
                            
                            // Get context path
                            function getContextPath() {
                                // Extract context path from current URL
                                // URL format: http://localhost:8080/contextPath/pages/user/register.xhtml
                                var pathArray = window.location.pathname.split('/');
                                
                                // For URL like /EZMart_Supermarket_Management-war_war/pages/user/register.xhtml
                                // We want to extract /EZMart_Supermarket_Management-war_war
                                
                                if(pathArray.length >= 2) {
                                    // pathArray[0] = empty (before first /)
                                    // pathArray[1] = context (app name)
                                    var contextPath = '/' + pathArray[1];
                                    console.log('Context path extracted from URL:', contextPath);
                                    return contextPath;
                                }
                                
                                // Fallback: try to extract from the data-contextpath if available
                                var contextDiv = document.getElementById('contextPath');
                                if(contextDiv && contextDiv.textContent) {
                                    console.log('Context path from div:', contextDiv.textContent);
                                    return contextDiv.textContent;
                                }
                                
                                console.warn('Context path not found, using empty string');
                                return '';
                            }
                            
                            // Load Vietnam provinces and districts
                            function loadVietnamData() {
                                var contextPath = getContextPath();
                                // Try multiple URL patterns
                                var urlPatterns = [
                                    contextPath + '/resources/data/vn-provinces.json',
                                    '/resources/data/vn-provinces.json',
                                    './resources/data/vn-provinces.json',
                                    '../../resources/data/vn-provinces.json'
                                ];
                                
                                function tryFetch(index) {
                                    if(index >= urlPatterns.length) {
                                        return Promise.reject(new Error('All URLs failed'));
                                    }
                                    
                                    var url = urlPatterns[index];
                                    console.log('Attempting to fetch Vietnam data from:', url);
                                    
                                    return fetch(url)
                                        .then(r => {
                                            console.log('Response status for ' + url + ':', r.status);
                                            if(!r.ok) throw new Error('HTTP ' + r.status);
                                            return r.json();
                                        })
                                        .then(data => {
                                            console.log('Vietnam data loaded successfully from:', url);
                                            regVietnamData = data;
                                            return data;
                                        })
                                        .catch(err => {
                                            console.warn('Failed to load from ' + url + ':', err.message);
                                            return tryFetch(index + 1);
                                        });
                                }
                                
                                return tryFetch(0);
                            }
                            
                            // Load US states and cities
                            function loadUSData() {
                                var contextPath = getContextPath();
                                // Try multiple URL patterns
                                var urlPatterns = [
                                    contextPath + '/resources/data/us-cities.json',
                                    '/resources/data/us-cities.json',
                                    './resources/data/us-cities.json',
                                    '../../resources/data/us-cities.json'
                                ];
                                
                                function tryFetch(index) {
                                    if(index >= urlPatterns.length) {
                                        return Promise.reject(new Error('All URLs failed'));
                                    }
                                    
                                    var url = urlPatterns[index];
                                    console.log('Attempting to fetch US data from:', url);
                                    
                                    return fetch(url)
                                        .then(r => {
                                            console.log('Response status for ' + url + ':', r.status);
                                            if(!r.ok) throw new Error('HTTP ' + r.status);
                                            return r.json();
                                        })
                                        .then(data => {
                                            console.log('US data loaded successfully from:', url);
                                            regUSData = data;
                                            return data;
                                        })
                                        .catch(err => {
                                            console.warn('Failed to load from ' + url + ':', err.message);
                                            return tryFetch(index + 1);
                                        });
                                }
                                
                                return tryFetch(0);
                            }
                            
                            // Initialize Tom Select for region and city
                            function initRegAddressTomSelect() {
                                console.log('initRegAddressTomSelect called');
                                console.log('TomSelect available:', typeof TomSelect);
                                
                                var regionSelect = document.getElementById('regaddr_region_input');
                                var citySelect = document.getElementById('regaddr_city_input');
                                
                                console.log('Region select element:', regionSelect);
                                console.log('City select element:', citySelect);
                                
                                // Destroy existing Tom-Select instances if they exist
                                if(regTomSelectRegion && typeof regTomSelectRegion.destroy === 'function') {
                                    try {
                                        regTomSelectRegion.destroy();
                                        regTomSelectRegion = null;
                                    } catch(e) {}
                                }
                                if(regTomSelectCity && typeof regTomSelectCity.destroy === 'function') {
                                    try {
                                        regTomSelectCity.destroy();
                                        regTomSelectCity = null;
                                    } catch(e) {}
                                }
                                
                                if(regionSelect && typeof TomSelect !== 'undefined') {
                                    try {
                                        regTomSelectRegion = new TomSelect(regionSelect, {
                                            create: false,
                                            placeholder: '-- Select --',
                                            searchField: 'text',
                                            onChange: onRegRegionChange
                                        });
                                        // Add styling to wrapper
                                        var regionWrapper = regionSelect.parentElement;
                                        if(regionWrapper && regionWrapper.classList) {
                                            regionWrapper.classList.add('w-full');
                                        }
                                        // Add styling to the control element (the visible input area)
                                        var regionControl = regionSelect.parentElement.querySelector('.ts-control');
                                        if(regionControl && regionControl.classList) {
                                            regionControl.classList.add('w-full', 'p-2', 'border', 'rounded-md', 'bg-white', 'dark:bg-gray-800');
                                        }
                                        console.log('Region Tom-Select initialized successfully');
                                    } catch(e) {
                                        console.error('Error initializing region Tom-Select:', e);
                                    }
                                }
                                
                                if(citySelect && typeof TomSelect !== 'undefined') {
                                    try {
                                        regTomSelectCity = new TomSelect(citySelect, {
                                            create: false,
                                            placeholder: '-- Select --',
                                            searchField: 'text',
                                            onChange: onRegCityChange
                                        });
                                        // Add styling to wrapper
                                        var cityWrapper = citySelect.parentElement;
                                        if(cityWrapper && cityWrapper.classList) {
                                            cityWrapper.classList.add('w-full');
                                        }
                                        // Add styling to the control element (the visible input area)
                                        var cityControl = citySelect.parentElement.querySelector('.ts-control');
                                        if(cityControl && cityControl.classList) {
                                            cityControl.classList.add('w-full', 'p-2', 'border', 'rounded-md', 'bg-white', 'dark:bg-gray-800');
                                        }
                                        console.log('City Tom-Select initialized successfully');
                                    } catch(e) {
                                        console.error('Error initializing city Tom-Select:', e);
                                    }
                                }
                            }
                            
                            // Ensure Tom-Select is initialized before use
                            function ensureTomSelectInitialized() {
                                if(!regTomSelectRegion) {
                                    console.log('Tom-Select not initialized, initializing now...');
                                    initRegAddressTomSelect();
                                }
                            }
                            
                            // Address modal functions for register
                            var regSelectedAddress = {};
                            
                            function openRegisterAddressModal() {
                                document.getElementById('registerAddressModal').classList.remove('hidden');
                                // Initialize Tom Select FIRST before resetting form
                                initRegAddressTomSelect();
                                // Then reset after Tom-Select is initialized
                                setTimeout(function() {
                                    resetRegAddressForm();
                                }, 50);
                            }
                            
                            function closeRegisterAddressModal() {
                                document.getElementById('registerAddressModal').classList.add('hidden');
                            }
                            
                            function resetRegAddressForm() {
                                document.getElementById('regaddr_type_ui').value = '';
                                document.getElementById('regaddr_country_ui').value = '';
                                if(regTomSelectRegion) regTomSelectRegion.clear();
                                if(regTomSelectCity) regTomSelectCity.clear();
                                document.getElementById('regaddr_street_ui').value = '';
                                
                                document.getElementById('regreg_region').classList.add('hidden');
                                document.getElementById('regstep_city').classList.add('hidden');
                                document.getElementById('regstep_street').classList.add('hidden');
                            }
                            
                            function onRegCountryChange() {
                                console.log('onRegCountryChange called');
                                
                                var country = document.getElementById('regaddr_country_ui').value;
                                console.log('Selected country:', country);
                                
                                // Find the hidden input for country (JSF may add prefix)
                                var countryHidden = document.querySelector('input[id*="regaddr_country"]');
                                if(countryHidden) {
                                    countryHidden.value = country;
                                    console.log('Set country hidden field to:', country);
                                }
                                
                                // Clear city and later selections
                                if(regTomSelectCity) regTomSelectCity.clear();
                                var cityStep = document.getElementById('regstep_city');
                                var streetStep = document.getElementById('regstep_street');
                                var labelStep = document.getElementById('regstep_label');
                                var mapWrapperStep = document.getElementById('regstep_map_wrapper');
                                var mapButtonRow = document.getElementById('regmap_button_row');
                                
                                if(cityStep) cityStep.classList.add('hidden');
                                if(streetStep) streetStep.classList.add('hidden');
                                if(labelStep) labelStep.classList.add('hidden');
                                if(mapWrapperStep) mapWrapperStep.classList.add('hidden');
                                if(mapButtonRow) mapButtonRow.classList.add('hidden');
                                
                                // Show/hide fields based on country
                                if(country) {
                                    console.log('Showing region div');
                                    document.getElementById('regreg_region').classList.remove('hidden');
                                    
                                    // Clear region
                                    if(regTomSelectRegion) regTomSelectRegion.clear();
                                    
                                    if(country === 'Vietnam') {
                                        console.log('Loading Vietnam data...');
                                        document.getElementById('reregion_label').textContent = 'Province';
                                        document.getElementById('regcity_label').textContent = 'District';
                                        
                                        // Load Vietnam data and populate region select
                                        loadVietnamData().then(function(data) {
                                            console.log('Vietnam data loaded:', data);
                                            if(regTomSelectRegion) {
                                                regTomSelectRegion.clearOptions();
                                                var provinces = Object.keys(data);
                                                console.log('Provinces:', provinces);
                                                provinces.forEach(function(prov) {
                                                    regTomSelectRegion.addOption({text: prov, value: prov});
                                                });
                                                regTomSelectRegion.refreshOptions(false);
                                            }
                                        }).catch(function(err) {
                                            console.error('Error loading Vietnam data:', err);
                                        });
                                    } else {
                                        console.log('Loading US data...');
                                        document.getElementById('reregion_label').textContent = 'State';
                                        document.getElementById('regcity_label').textContent = 'City / Town';
                                        
                                        // Load US data and populate region select
                                        loadUSData().then(function(data) {
                                            console.log('US data loaded:', data);
                                            if(regTomSelectRegion) {
                                                regTomSelectRegion.clearOptions();
                                                var states = Object.keys(data);
                                                console.log('States:', states);
                                                states.forEach(function(state) {
                                                    regTomSelectRegion.addOption({text: state, value: state});
                                                });
                                                regTomSelectRegion.refreshOptions(false);
                                            }
                                        }).catch(function(err) {
                                            console.error('Error loading US data:', err);
                                        });
                                    }
                                } else {
                                    console.log('Hiding region div');
                                    document.getElementById('regreg_region').classList.add('hidden');
                                }
                            }
                            
                            function onRegRegionChange() {
                                var country = document.getElementById('regaddr_country_ui').value;
                                var region = regTomSelectRegion ? regTomSelectRegion.getValue() : document.getElementById('regaddr_region_input').value;
                                
                                // Find the hidden input for region (JSF may add prefix)
                                var regionHidden = document.querySelector('input[id*="regaddr_region"]');
                                if(regionHidden) {
                                    regionHidden.value = region;
                                }
                                
                                if(regTomSelectCity) regTomSelectCity.clear();
                                var streetStep = document.getElementById('regstep_street');
                                if(streetStep) streetStep.classList.add('hidden');
                                
                                if(region) {
                                    var cityStep = document.getElementById('regstep_city');
                                    if(cityStep) cityStep.classList.remove('hidden');
                                    
                                    // Load cities for selected province/state
                                    if(country === 'Vietnam' && regVietnamData) {
                                        if(regTomSelectCity) {
                                            regTomSelectCity.clearOptions();
                                            var districts = regVietnamData[region] ? regVietnamData[region].districts : [];
                                            districts.forEach(function(dist) {
                                                regTomSelectCity.addOption({text: dist, value: dist});
                                            });
                                        }
                                    } else if(country === 'United States' && regUSData) {
                                        if(regTomSelectCity) {
                                            regTomSelectCity.clearOptions();
                                            var cities = regUSData[region] || [];
                                            cities.forEach(function(city) {
                                                regTomSelectCity.addOption({text: city, value: city});
                                            });
                                        }
                                    }
                                } else {
                                    var cityStep = document.getElementById('regstep_city');
                                    if(cityStep) cityStep.classList.add('hidden');
                                }
                            }
                            
                            function onRegCityChange() {
                                var country = document.getElementById('regaddr_country_ui').value;
                                var city = regTomSelectCity ? regTomSelectCity.getValue() : document.getElementById('regaddr_city_input').value;
                                
                                // Find the hidden input for city (JSF may add prefix)
                                var cityHidden = document.querySelector('input[id*="regaddr_city"]');
                                if(cityHidden) {
                                    cityHidden.value = city;
                                }
                                
                                if(city) {
                                    // Show street
                                    var streetStep = document.getElementById('regstep_street');
                                    var labelStep = document.getElementById('regstep_label');
                                    var mapButtonRow = document.getElementById('regmap_button_row');
                                    
                                    if(streetStep) streetStep.classList.remove('hidden');
                                    if(labelStep) labelStep.classList.remove('hidden');
                                    if(mapButtonRow) mapButtonRow.classList.remove('hidden');
                                } else {
                                    var streetStep = document.getElementById('regstep_street');
                                    var labelStep = document.getElementById('regstep_label');
                                    var mapButtonRow = document.getElementById('regmap_button_row');
                                    var mapWrapperStep = document.getElementById('regstep_map_wrapper');
                                    
                                    if(streetStep) streetStep.classList.add('hidden');
                                    if(labelStep) labelStep.classList.add('hidden');
                                    if(mapButtonRow) mapButtonRow.classList.add('hidden');
                                    if(mapWrapperStep) mapWrapperStep.classList.add('hidden');
                                }
                            }
                            
                            // Map variables for register
                            var regMap = null;
                            var regMapMarker = null;
                            var regMapInited = false;
                            
                            // Initialize the map for register address
                            function initRegAddressMap() {
                                var mapContainer = document.getElementById('regaddr_map');
                                if(mapContainer != null && mapContainer._leaflet_id !== undefined) {
                                    try {
                                        mapContainer._leaflet_id = null;
                                        if(window.regMap && typeof window.regMap.remove === 'function') {
                                            window.regMap.remove();
                                        }
                                    } catch(e) { }
                                }
                                regMapInited = false;
                                
                                if(regMapInited) return;
                                regMapInited = true;
                                
                                var defaultLat = 21.0285, defaultLng = 105.8542; // Hanoi, Vietnam
                                var country = document.getElementById('regaddr_country_ui').value;
                                
                                // Set default location based on country
                                if(country === 'United States') {
                                    defaultLat = 37.7749;  // San Francisco
                                    defaultLng = -122.4194;
                                }
                                
                                regMap = L.map('regaddr_map', {center: [defaultLat, defaultLng], zoom: 12});
                                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19}).addTo(regMap);
                                regMapMarker = L.marker([defaultLat, defaultLng], {draggable: true}).addTo(regMap);
                                
                                regMapMarker.on('dragend', function(e) {
                                    var latlng = regMapMarker.getLatLng();
                                    var latInput = document.querySelector('input[id*="regaddr_lat"]');
                                    var lngInput = document.querySelector('input[id*="regaddr_lng"]');
                                    var mapSelInput = document.querySelector('input[id*="regaddr_map_selected"]');
                                    if(latInput) latInput.value = latlng.lat;
                                    if(lngInput) lngInput.value = latlng.lng;
                                    if(mapSelInput) mapSelInput.value = '1';
                                });
                                
                                // Allow clicking on map to move marker
                                regMap.on('click', function(e) {
                                    regMapMarker.setLatLng(e.latlng);
                                    var latInput = document.querySelector('input[id*="regaddr_lat"]');
                                    var lngInput = document.querySelector('input[id*="regaddr_lng"]');
                                    var mapSelInput = document.querySelector('input[id*="regaddr_map_selected"]');
                                    if(latInput) latInput.value = e.latlng.lat;
                                    if(lngInput) lngInput.value = e.latlng.lng;
                                    if(mapSelInput) mapSelInput.value = '1';
                                });
                            }
                            
                            function openRegMapPicker() {
                                console.log('Opening register address map picker');
                                document.getElementById('regstep_map_wrapper').classList.remove('hidden');
                                setTimeout(function() {
                                    initRegAddressMap();
                                    geocodeRegAddressAndSetMarker();
                                }, 100);
                            }
                            
                            function geocodeRegAddressAndSetMarker() {
                                var city = regTomSelectCity ? regTomSelectCity.getValue() : document.getElementById('regaddr_city_input').value;
                                var country = document.getElementById('regaddr_country_ui').value;
                                
                                if(!city) return;
                                
                                var query = city + ', ' + country;
                                console.log('Geocoding:', query);
                                
                                // Use OpenStreetMap geocoding API
                                fetch('https://nominatim.openstreetmap.org/search?format=json&q=' + encodeURIComponent(query))
                                    .then(r => r.json())
                                    .then(data => {
                                        if(data && data.length > 0) {
                                            var result = data[0];
                                            var lat = parseFloat(result.lat);
                                            var lng = parseFloat(result.lon);
                                            console.log('Geocoded location:', lat, lng);
                                            
                                            if(regMap && regMapMarker) {
                                                regMap.setView([lat, lng], 12);
                                                regMapMarker.setLatLng([lat, lng]);
                                                
                                                var latInput = document.querySelector('input[id*="regaddr_lat"]');
                                                var lngInput = document.querySelector('input[id*="regaddr_lng"]');
                                                if(latInput) latInput.value = lat;
                                                if(lngInput) lngInput.value = lng;
                                            }
                                        }
                                    })
                                    .catch(err => console.error('Geocoding error:', err));
                            }
                            
                            function saveRegisterAddress() {
                                var type = document.getElementById('regaddr_type_ui').value;
                                var country = document.getElementById('regaddr_country_ui').value;
                                var region = regTomSelectRegion ? regTomSelectRegion.getValue() : document.getElementById('regaddr_region_input').value;
                                var city = regTomSelectCity ? regTomSelectCity.getValue() : document.getElementById('regaddr_city_input').value;
                                var street = document.getElementById('regaddr_street_ui').value;
                                var label = document.getElementById('regaddr_label_ui').value;
                                
                                if(!country || !region || !city || !street) {
                                    alert('Please fill all required fields');
                                    return;
                                }
                                
                                // Get coordinates from map marker if available
                                var lat = null;
                                var lng = null;
                                if(regMapMarker) {
                                    var latlng = regMapMarker.getLatLng();
                                    lat = latlng.lat;
                                    lng = latlng.lng;
                                }
                                
                                // Store address data
                                regSelectedAddress = {
                                    type: type,
                                    country: country,
                                    state: region,
                                    city: city,
                                    street: street,
                                    label: label,
                                    latitude: lat,
                                    longitude: lng
                                };
                                
                                // Update hidden fields using attribute selectors (JSF may add prefix)
                                var typeHidden = document.querySelector('input[id*="regaddr_type"]');
                                var countryHidden = document.querySelector('input[id*="regaddr_country"]');
                                var regionHidden = document.querySelector('input[id*="regaddr_region"]');
                                var cityHidden = document.querySelector('input[id*="regaddr_city"]');
                                var streetHidden = document.querySelector('input[id*="regaddr_street"]');
                                var labelHidden = document.querySelector('input[id*="regaddr_label"]');
                                var latHidden = document.querySelector('input[id*="regaddr_lat"]');
                                var lngHidden = document.querySelector('input[id*="regaddr_lng"]');
                                
                                if(typeHidden) typeHidden.value = type;
                                if(countryHidden) countryHidden.value = country;
                                if(regionHidden) regionHidden.value = region;
                                if(cityHidden) cityHidden.value = city;
                                if(streetHidden) streetHidden.value = street;
                                if(labelHidden) labelHidden.value = label;
                                if(latHidden && lat) latHidden.value = lat;
                                if(lngHidden && lng) lngHidden.value = lng;
                                
                                console.log('Address saved with coordinates:', lat, lng);
                                
                                // Update display
                                var displayText = street + ', ' + city + ', ' + region + ', ' + country;
                                var displayDiv = document.getElementById('reg-address-display');
                                if(displayDiv) {
                                    displayDiv.innerHTML = '<strong>Address:</strong> ' + displayText;
                                }
                                
                                closeRegisterAddressModal();
                            }
                        //]]></script>
                        <!-- Trust Signals -->
                        <div class="pt-4 flex items-center justify-center gap-2 text-xs text-[#4b5563] dark:text-[#d1d5db]">
                            <span class="material-symbols-outlined text-[16px]">lock</span>
                            <span>#{locale.getMessage('register.dataSecure')}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
